# RTMP → RTSP Конвертер

## Описание проекта

RTMP → RTSP Конвертер — это сервис для трансляции видеопотоков между несовместимыми системами. Он принимает входящие видеопотоки в формате RTMP (например, от дронов или стриминговых платформ) и автоматически конвертирует их в RTSP-потоки, совместимые с вашей системой видеонаблюдения или проигрывателями (VLC, ffplay и т.д.).

Проект разработан в рамках хакатона.

---

## Как запустить

Требования: установленный Docker и Docker Compose

1. Клонируйте репозиторий:

```bash
git clone https://github.com/your/repo.git
cd R2R
```

2. Запустите весь стек:

```bash
docker compose up -d --build
```

3. Всё! Сервис готов к использованию.


## Как пользоваться

1. Отправьте RTMP-поток на сервер:

```bash
ffmpeg -re -i test.mp4 -c copy -f flv rtmp://127.0.0.1:1935/live/drone1
```

2. Откройте RTSP-поток в проигрывателе:

 - VLC:
```bash
rtsp://127.0.0.1:8554/live/drone1
```
 - ffplay:

```bash
ffplay rtsp://127.0.0.1:8554/live/drone1
```

Поддерживается несколько потоков одновременно, например:

 - live/drone2
 - live/drone3
 - и т.д.

## Архитектура

Сервис состоит из трёх контейнеров:

 - RTMP-сервер на основе MediaMTX

 - RTSP-сервер на основе того же MediaMTX

 - Go-приложение-конвертер, которое отслеживает логи RTMP-сервера, автоматически запускает и останавливает процессы ffmpeg для конвертации потоков

## Используемые технологии

 - MediaMTX — RTMP/RTSP сервер

 - FFmpeg — конвертация видео

 - Go — основная логика, управление процессами

 - Docker / Docker Compose — контейнеризация